-- MEMBER TABLE 생성
CREATE TABLE member(
	name varchar2(10),
	userid varchar2(10),
	pwd varchar2(10),
	email varchar2(20),
	phone char(13),
	admin number(1) default 0,
	joindate date default sysdate,
	PRIMARY KEY (userid)
);

-- 접속한 계정의 테이블 목록 조회
SELECT * FROM USER_TABLES WHERE TABLE_NAME = 'MEMBER';
-- 접속한 계정의 테이블별 컬럼 조회
SELECT * FROM USER_TAB_COLUMNS WHERE TABLE_NAME = 'MEMBER';
-- 접속한 계정의 테이블별 제약조건 검색
SELECT * FROM USER_CONSTRAINTS WHERE TABLE_NAME IN ('MEMBER');

-- TITLE
DROP TABLE TITLE;
CREATE TABLE TITLE(
	TITLE_NO	 NUMBER PRIMARY KEY,
	TITLE_NAME	 VARCHAR2(40)
);
--COLUMN명 바꾸기
--ALTER TABLE TITLE RENAME COLUMN TITLR_NAME TO TITLE_NAME;

-- DEPARTMENT
DROP TABLE DEPARTMENT;
CREATE TABLE DEPARTMENT(
	DEPT_NO		 NUMBER PRIMARY KEY,
	DEPT_NAME	 VARCHAR2(40),
	FLOOR 		 NUMBER
);

-- EMPLOYEE
DROP TABLE EMPLOYEE;
CREATE TABLE EMPLOYEE(
	EMP_NO 		NUMBER,
	EMP_NAME 	VARCHAR2(20) NOT NULL,
	TNO			NUMBER,
	MANAGER		NUMBER,
	SALARY		NUMBER,
	DNO			NUMBER,
	EMAIL		VARCHAR2(60) NOT NULL,
	PASSWD		VARCHAR2(60) NOT NULL,
	REGDATE		DATE DEFAULT SYSDATE,
	TEL			CHAR(13),
	PIC_URI		VARCHAR2(100),
	CONSTRAINT EMPLOYEE_EMPNO_PK	PRIMARY KEY (EMP_NO),
	CONSTRAINT EMPLOYEE_TNO_FK		FOREIGN KEY (TNO)		REFERENCES TITLE(TITLE_NO) ON DELETE SET NULL,
	CONSTRAINT EMPLOYEE_MANAGER_FK	FOREIGN KEY (MANAGER)	REFERENCES EMPLOYEE(EMP_NO),
	CONSTRAINT EMPLOYEE_SALARY_CK	CHECK (SALARY < 6000000),
	CONSTRAINT EMPLOYEE_DNO_FK		FOREIGN KEY (DNO)		REFERENCES DEPARTMENT(DEPT_NO) ON DELETE CASCADE
);

-- 접속한 계정의 테이블별 제약조건 검색
SELECT * FROM USER_CONSTRAINTS WHERE TABLE_NAME IN ('TITLE', 'DEPARTMENT', 'EMPLOYEE');